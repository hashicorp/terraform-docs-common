---
page_title: Terraform migrate overview
description: >-
  Learn how to install and configure the Terraform migrate CLI tool.
---

# Terraform migrate

Terraform migrate automatically migrates your Terraform Community Edition state and variables to HCP Terraform or Terraform Enterprise. It also updates your local configuration with any necessary changes and optionally creates a pull request to update your code repository.

## Overview

Complete the following steps to install and configure the Terraform migrate CLI:

1. Download and install `tf-migrate`: You can manually download and install or use Homebrew if you are on macOS.
1. Connect the CLI to HCP Terraform or Terraform Enterprise. Use the Terraform CLI to authenticate with your web UI.
1. Enable logging so that you can troubleshoot potential issues that may occur during the migration process.

### GitHub connection requirements

If your Terraform files are stored in a GitHub repository, you must present an HCP Terraform API token that meets the following requirements:

- The token must be a classic token. Refer to the [GitHub documentation](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens) for additional information 
- The token must have the `repo` OAuth scope.

If your Terraform files are stored in Gitlab Cloud, you must present an API token that meets the following requirements:

- The token must be a personal access token. Refer to the [GitHub documentation](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens) for additional information.
- The token must be have `read_repository` and `write_repository` scopes

## Install

<Tabs>

<Tab heading="Manual installation">

HashiCorp distributes Terraform migrate as a binary package. To install Terraform migrate, find the [appropriate binary](https://releases.hashicorp.com/tf-migrate/) for your operating system and download it as a zip archive.

After you download Terraform migrate, unzip the archive. Terraform migrate runs as a single binary named `tf-migrate`.

Finally, make sure that the `tf-migrate` binary is available in a directory that is in your system's `PATH`. 

### Verify the installation

Every build of Terraform migrate includes a `SHA256SUMS` and a `SHA256SUMS.sig` file to validate your downloaded binary. Refer to the [verify HashiCorp binary downloads tutorial](https://developer.hashicorp.com/well-architected-framework/operational-excellence/verify-hashicorp-binary) for more information.

</Tab>

<Tab heading="Homebrew of macOS">

[Homebrew](https://brew.sh/) is a free and open-source package management system for macOS. You can install the official [Terraform migrate](https://github.com/hashicorp/homebrew-tap) formula from the terminal.

First, install the HashiCorp tap, a repository of all our Homebrew packages.

```
$ brew tap hashicorp/tap
```

Now, install Terraform migrate with the `hashicorp/tap/tf-migrate` formula.

```
$ brew install hashicorp/tap/tf-migrate
```

</Tab>

</Tabs>

## Connect to HCP Terraform or Enterprise Terraform

Terraform migrate uses your locally configured Terraform CLI API token. If you have not authenticated your local Terraform installation with HCP Terraform, use the `terraform login` command to create an authentication token.

```
$ terraform login

Terraform will request an API token for app.terraform.io using your browser.

If login is successful, Terraform will store the token in plain text in
the following file for use by subsequent commands:
   /Users/redacted/.terraform.d/credentials.tfrc.json

Do you want to proceed?
 Only 'yes' will be accepted to confirm.

 Enter a value: yes
```

Terraform opens a browser to the HCP Terraform login screen. Enter a token name in the web UI, or leave the default name. Click **Create API token** to generate the authentication token.

HCP Terraform only displays your token once. Copy this token, then when the Terraform CLI prompts you, paste the user token exactly once into your terminal. Press **Enter** to complete the authentication process.

Terraform migrate can optionally create a pull request that updates the backend blocks in your Terraform configuration. To do this, Terraform migrate uses the GitHub or Gitlab Cloud API, and requires an API token with permissions to modify your git repository.

To configure your API token, set the `TF_GIT_PAT_TOKEN` environment variable

```
$ export TF_GIT_PAT_TOKEN=<TOKEN>
```


## Supported backend

Terraform migrate supports migrating state from the following backends to HCP Terraform or Terraform Enterprise:

- [local](/terraform/language/backend/local)
- [azurerm](/terraform/language/backend/azurerm)
- [consul](/terraform/language/backend/consul)
- [cos](/terraform/language/backend/cos)
- [gcs](/terraform/language/backend/gcs)
- [http](/terraform/language/backend/http)
- [Kubernetes](/terraform/language/backend/kubernetes)
- [oss](/terraform/language/backend/oss)
- [pg](/terraform/language/backend/pg)
- [s3](/terraform/language/backend/s3)

Terraform migrate does not support migrating from an existing "cloud" or "remote" backend.

## Enable logging

You can enable detailed logging by setting the `TF_MIGRATE_ENABLE_LOG` environment variable to `true`. When you enable this setting, Terraform migrate writes the logs to the following locations, depending on your operating system:

| Platform | Location |
| -------- | -------- |
| macOS and Linux | `/Users/<username>/.tf-migrate/logs/<commandName>/<date>.log` |
| Windows | `C:\Users\<username>\.tf-migrate\logs\<commandName>\<date>.log` |

You can set the `TF_MIGRATE_LOG_LEVEL` environment variable to one of the following values to change the verbosity of the logs in order of decreasing verbosity: 

- `TRACE`
- `DEBUG` 
- `INFO` 
- `WARN`
- `ERROR`

## Additional configuration

You can create an optional configuration file to modify the `tf-migrate` CLI behavior and specify the path to the configuration file when you run `tf-migrate prepare`. Any command-line flags you provide with these commands override the configuration file. Refer to the [configuration reference](/terraform/cloud-docs/migrate/reference/configuration) for additional information.
